kind: Deploy
type: pulumi
name: k8s-deployment
description: Creates a Deployment and a Service in the namespace generated by the k8s-namespace service.
variables:
  foo: bar
dependencies:
  - deploy.k8s-namespace
spec:
  createStack: true
  cacheStatus: true
  stack: k8s-deployment
  stackReferences:
    - ${actions.deploy.k8s-namespace.outputs.namespace}
  pulumiVarfiles: [varfile1.yaml, varfile2.yaml]
  pulumiVariables:
    kubernetes:context: docker-desktop
    pulumi-k8s:orgName: ${var.pulumiAppOrg}
    pulumi-k8s:appName: api-pulumi-variables-override
    pulumi-k8s:isMinikube: "true"
